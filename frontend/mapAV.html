<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reservar Estacionamiento</title>
    <!-- CSS de Select2 -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.6-rc.0/css/select2.min.css">

    <!-- jQuery -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

    <!-- Script de Select2 -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.6-rc.0/js/select2.min.js"></script>
    <!-- Enlace a Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <!-- Enlace a SweetAlert -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css">
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f2f2f2;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        .header {
            width: 100%;
            background-color: #003DA6;
            color: #fff;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 0px;
        }
        .header .menu-icon, .header .location-icon {
            font-size: 24px;
            cursor: pointer;
        }
        .header h1 {
            margin: 0;
            font-size: 24px;
            display: flex;
            align-items: center;
        }
        .header h1 .location-icon {
            margin-right: 10px;
        }
        .button-container {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin: 20px 0;
        }
        .button-container button {
            padding: 10px;
            border: none;
            border-radius: 100px;
            cursor: pointer;
            font-size: 16px;
            color: #013DA0;
            background-color: #87CEEB;
        }
        .button-container button:hover {
            background-color: #cce0ff;
        }
        .container {
            display: inline-block;
            margin-top: 20px;
            width: 1400px; /* Ajusta este tamaño según tus necesidades */
            height: 500px; /* Ajusta este tamaño según tus necesidades */
            background-color: #e0e0e0;
            position: relative;
            overflow: auto; /* Habilitar scroll */
        }
        .parking-spot, .disabled-spot {
            position: absolute;
            width: 30px;
            height: 30px;
            border: 1px solid blue;
            cursor: pointer;
        }
        .parking-spot {
            background-color: rgba(0, 0, 255, 0.3);
        }
        .disabled-spot {
            background-color: rgba(128, 128, 128, 0.5);
            cursor: not-allowed;
        }
        /* Positions for parking spots */
        /* profes */
        #spot1 { top: 20px; left: 60px; }
        #spot2 { top: 60px; left: 60px; }
        #spot3 { top: 100px; left: 60px; }
        #spot4 { top: 140px; left: 60px; }


        #spot5 { top: 20px; left: 180px; }
        #spot6 { top: 60px; left: 180px; }
        #spot7 { top: 100px; left: 180px; }
        #spot8 { top: 140px; left: 180px; }

        /* frente av */
        #spot9  { top: 380px; left: 300px; }
        #spot10 { top: 380px; left: 340px; }
        #spot11 { top: 380px; left: 380px; }
        #spot12 { top: 380px; left: 420px; }
        #spot13 { top: 380px; left: 460px; }
        #spot14 { top: 380px; left: 500px; }
        #spot15 { top: 380px; left: 540px; }
        #spot16 { top: 380px; left: 580px; }
        #spot17 { top: 380px; left: 620px; }
        #spot18 { top: 380px; left: 660px; }
        #spot19 { top: 380px; left: 700px; }
        #spot20 { top: 380px; left: 740px; }
        #spot21 { top: 380px; left: 780px; }

        #spot22 { top: 475px; left: 300px; }
        #spot23 { top: 475px; left: 340px; }
        #spot24 { top: 475px; left: 380px; }
        #spot25 { top: 475px; left: 420px; }
        #spot26 { top: 475px; left: 460px; }
        #spot27 { top: 475px; left: 500px; }
        #spot28 { top: 475px; left: 540px; }
        #spot29 { top: 475px; left: 580px; }
        #spot30 { top: 475px; left: 620px; }
        #spot31 { top: 475px; left: 660px; }
        #spot32 { top: 475px; left: 700px; }
        #spot33 { top: 475px; left: 740px; }
        #spot34 { top: 475px; left: 780px; }

        #spot35 { top: 380px; left: 860px; }
        #spot36 { top: 380px; left: 900px; }
        #spot37 { top: 380px; left: 940px; }
        #spot38 { top: 380px; left: 980px; }
        #spot39 { top: 380px; left: 1020px; }
        #spot40 { top: 380px; left: 1060px; }
        #spot41 { top: 380px; left: 1100px; }
        #spot42 { top: 380px; left: 1140px; }
        #spot43 { top: 380px; left: 1180px; }


        #spot44 { top: 475px; left: 860px; }
        #spot45 { top: 475px; left: 900px; }
        #spot46 { top: 475px; left: 940px; }
        #spot47 { top: 475px; left: 980px; }
        #spot48 { top: 475px; left: 1020px; }
        #spot49 { top: 475px; left: 1060px; }
        #spot50 { top: 475px; left: 1100px; }
        #spot51 { top: 475px; left: 1140px; }
        #spot52 { top: 475px; left: 1180px; }


        #spot53 { top: 380px; left: 1280px; }
        #spot54 { top: 380px; left: 1320px; }
        #spot55 { top: 380px; left: 1360px; }
        #spot56 { top: 380px; left: 1400px; }
        #spot57 { top: 475px; left: 1280px; }
        #spot58 { top: 475px; left: 1320px; }
        #spot59 { top: 475px; left: 1360px; }
        #spot60 { top: 475px; left: 1400px; }

        /*av*/
        #disabled1 { top: 20px; left: 460px; width: 420px; height: 200px; }
        /*semda*/
        #disabled2 { top: 40px; left: 950px; width: 230px; height: 170px;transform: rotate(-5deg); }
        /*itr*/
        #disabled3 { top: 100px; left: 1450px; width: 150px; height: 200px; transform: rotate(-15deg); }
        
        /*otro*/
        #disabled4 { top: 10px; left: 1200px; width: 200px; height: 100px; transform: rotate(-10deg); }

        /*deprofe*/
        #disabled5{ top: 20px; left: 270px; width: 130px; height: 160px; }

        /*calles*/
        #disabled6,#disabled7,#disabled8 {
            background-color: white;
            cursor: not-allowed;
            border: 1px white;
        }
        #disabled6{ top: 420px; left: 30px; width: 1400px; height: 50px;}
        #disabled7{ top: 20px; left: 100px; width: 70px; height: 400px;}
        #disabled8{top: 450px; left: 20px; width: 70px; height: 100px; transform: rotate(20deg);}
        #disabled1 span{
            display: block;
            text-align: center;
            color: #000;
            font-weight: bold;
            font-size: 16px;
            line-height: 190px;
        }
        #disabled2 span{
            display: block;
            text-align: center;
            color: #000;
            font-weight: bold;
            font-size: 16px;
            line-height: 190px;
        }
        #disabled3 span{
            display: block;
            text-align: center;
            color: #000;
            font-weight: bold;
            font-size: 16px;
            line-height: 190px;
        }
        #disabled4 span{
            display: block;
            text-align: center;
            color: #000;
            font-weight: bold;
            font-size: 16px;
            line-height: 190px;
        }
        #disabled5 span{
            display: block;
            text-align: center;
            color: #000;
            font-weight: bold;
            font-size: 16px;
            line-height: 190px;
        }
        .reserve-button {
            margin-top: 10px;
            padding: 10px 20px;
            border: 2px solid #0056b3;
            background-color: #fff;
            color: #0056b3;
            font-size: 16px;
            cursor: pointer;
            border-radius: 20px;
        }
        .reserve-button:hover {
            background-color: #004494;
        }
        .seleccion-button {
            padding: 10px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            color: white;
            background-color: #0056b3;
        }
        .digital-clock {
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 2em;
            font-family: 'Courier New', Courier, monospace;
            margin-bottom: 20px;
        }
        .digital-clock input {
            width: 3em;
            text-align: center;
            font-size: 1em;
            border: 1px solid #ccc;
            border-radius: 5px;
            margin: 0 5px;
        }
        .swal2-popup .swal2-html-container {
            padding: 20px;
        }

        .swal2-popup .swal2-actions button {
            margin: 5px;
        }
        .status-bar {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin: 10px 0;
        }
        .status-item {
            display: flex;
            align-items: center;
            gap: 5px;
        }
        .status-color {
            width: 20px;
            height: 20px;
            display: inline-block;
        }
        .status-available {
            background-color: rgba(0, 0, 255, 0.3);
        }
        .status-reserved {
            background-color: rgba(255, 0, 0, 0.3);
        }
        .reserved-spot {
            background-color: rgba(255, 0, 0, 0.3);
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="parking-spot" id="spot1" onclick="reservar(1)"><span></span></div>
        <div class="parking-spot" id="spot2" onclick="reservar(2)"><span></span></div>
        <div class="parking-spot" id="spot3" onclick="reservar(3)"><span></span></div>
        <div class="parking-spot" id="spot4" onclick="reservar(4)"><span></span></div>
        <div class="parking-spot" id="spot5" onclick="reservar(5)"><span></span></div>
        <div class="parking-spot" id="spot6" onclick="reservar(6)"><span></span></div>
        <div class="parking-spot" id="spot7" onclick="reservar(7)"><span></span></div>
        <div class="parking-spot" id="spot8" onclick="reservar(8)"><span></span></div>
        <div class="parking-spot" id="spot9" onclick="reservar(9)"><span></span></div>
        <div class="parking-spot" id="spot10" onclick="reservar(10)"><span></span></div>
        <div class="parking-spot" id="spot11" onclick="reservar(11)"><span></span></div>
        <div class="parking-spot" id="spot12" onclick="reservar(12)"><span></span></div>
        <div class="parking-spot" id="spot13" onclick="reservar(13)"><span></span></div>
        <div class="parking-spot" id="spot14" onclick="reservar(14)"><span></span></div>
        <div class="parking-spot" id="spot15" onclick="reservar(15)"><span></span></div>
        <div class="parking-spot" id="spot16" onclick="reservar(16)"><span></span></div>
        <div class="parking-spot" id="spot17" onclick="reservar(17)"><span></span></div>
        <div class="parking-spot" id="spot18" onclick="reservar(18)"><span></span></div>
        <div class="parking-spot" id="spot19" onclick="reservar(19)"><span></span></div>
        <div class="parking-spot" id="spot20" onclick="reservar(20)"><span></span></div>
        <div class="parking-spot" id="spot21" onclick="reservar(21)"><span></span></div>
        <div class="parking-spot" id="spot22" onclick="reservar(22)"><span></span></div>
        <div class="parking-spot" id="spot23" onclick="reservar(23)"><span></span></div>
        <div class="parking-spot" id="spot24" onclick="reservar(24)"><span></span></div>
        <div class="parking-spot" id="spot25" onclick="reservar(25)"><span></span></div>
        <div class="parking-spot" id="spot26" onclick="reservar(26)"><span></span></div>
        <div class="parking-spot" id="spot27" onclick="reservar(27)"><span></span></div>
        <div class="parking-spot" id="spot28" onclick="reservar(28)"><span></span></div>
        <div class="parking-spot" id="spot29" onclick="reservar(29)"><span></span></div>
        <div class="parking-spot" id="spot30" onclick="reservar(30)"><span></span></div>
        <div class="parking-spot" id="spot31" onclick="reservar(31)"><span></span></div>
        <div class="parking-spot" id="spot32" onclick="reservar(32)"><span></span></div>
        <div class="parking-spot" id="spot33" onclick="reservar(33)"><span></span></div>
        <div class="parking-spot" id="spot34" onclick="reservar(34)"><span></span></div>
        <div class="parking-spot" id="spot35" onclick="reservar(35)"><span></span></div>
        <div class="parking-spot" id="spot36" onclick="reservar(36)"><span></span></div>
        <div class="parking-spot" id="spot37" onclick="reservar(37)"><span></span></div>
        <div class="parking-spot" id="spot38" onclick="reservar(38)"><span></span></div>
        <div class="parking-spot" id="spot39" onclick="reservar(39)"><span></span></div>
        <div class="parking-spot" id="spot40" onclick="reservar(40)"><span></span></div>
        <div class="parking-spot" id="spot41" onclick="reservar(41)"><span></span></div>
        <div class="parking-spot" id="spot42" onclick="reservar(42)"><span></span></div>
        <div class="parking-spot" id="spot43" onclick="reservar(43)"><span></span></div>
        <div class="parking-spot" id="spot44" onclick="reservar(44)"><span></span></div>
        <div class="parking-spot" id="spot45" onclick="reservar(45)"><span></span></div>
        <div class="parking-spot" id="spot46" onclick="reservar(46)"><span></span></div>
        <div class="parking-spot" id="spot47" onclick="reservar(47)"><span></span></div>
        <div class="parking-spot" id="spot48" onclick="reservar(48)"><span></span></div>
        <div class="parking-spot" id="spot49" onclick="reservar(49)"><span></span></div>
        <div class="parking-spot" id="spot50" onclick="reservar(50)"><span></span></div>
        <div class="parking-spot" id="spot51" onclick="reservar(51)"><span></span></div>
        <div class="parking-spot" id="spot52" onclick="reservar(52)"><span></span></div>

        <div class="parking-spot" id="spot53" onclick="reservar(53)"><span></span></div>
        <div class="parking-spot" id="spot54" onclick="reservar(54)"><span></span></div>
        <div class="parking-spot" id="spot55" onclick="reservar(55)"><span></span></div>
        <div class="parking-spot" id="spot56" onclick="reservar(56)"><span></span></div>
        <div class="parking-spot" id="spot57" onclick="reservar(57)"><span></span></div>
        <div class="parking-spot" id="spot58" onclick="reservar(58)"><span></span></div>
        <div class="parking-spot" id="spot59" onclick="reservar(59)"><span></span></div>
        <div class="parking-spot" id="spot60" onclick="reservar(60)"><span></span></div>

        <div class="disabled-spot" id="disabled1"><span>AULAS VIRTUALES</span></div>
        <div class="disabled-spot" id="disabled2"><span>semda</span></div>
        <div class="disabled-spot" id="disabled3"><span>ITR</span></div>
        <div class="disabled-spot" id="disabled4"><span>Auditorio</span></div>
        <div class="disabled-spot" id="disabled5"><span>Ed.Docentes</span></div>
        <div class="disabled-spot" id="disabled6"></div>
        <div class="disabled-spot" id="disabled7"></div>
        <div class="disabled-spot" id="disabled8"></div>
    </div>
    
</body>
<script>
    //Funcionalidad cambio color 
    console.log("EN SCRIPT DE PRINCIPALMEYER");

fetch('/usuarios/selectEstacionamientoEstado')
    .then(response => {
        console.log('Respuesta recibida del servidor:', response);
        if (!response.ok) {
            throw new Error('Network response was not ok ' + response.statusText);
        }
        return response.json();
    })
    .then(data => {
        console.log('Datos parseados del servidor:', data);

        localStorage.setItem('estacionamientos', JSON.stringify(data));
        console.log('Datos almacenados en localStorage:', JSON.parse(localStorage.getItem('estacionamientos')));

        // Cambiar los colores de los estacionamientos reservados después de guardar los datos
        const estacionamientos = JSON.parse(localStorage.getItem('estacionamientos')) || [];
        console.log('Estacionamientos desde localStorage:', estacionamientos);
        estacionamientos.forEach(estacionamiento => {
            if (estacionamiento.estado === 'Reservado') {
                const spotElement = document.getElementById(`spot${estacionamiento.id_espacio}`);
                if (spotElement) {
                    console.log(`Cambiando color de spot${estacionamiento.id_espacio} a reservado`);
                    spotElement.classList.add('reserved-spot');
                } else {
                    console.error(`Elemento spot${estacionamiento.id_espacio} no encontrado`);
                }
            }
        });
    })
    .catch(error => console.error('Error al obtener los estacionamientos:', error));
    //cierre Funcionalidad cambio color
</script>
</html>
